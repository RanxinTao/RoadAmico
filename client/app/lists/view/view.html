<div ng-include="'components/navbar/navbar.html'"></div>

<div class="list-view container">
  <ol class="breadcrumb">
    <li><a ui-sref="lists">Lists</a></li>
    <li class="active">{{list.name}}</li>
  </ol>

  <h1>{{list.name}}</h1>

  <!-- Controls -->
  <div ng-show="canEdit(list)">
    <button ng-click="editing = true" class="btn btn-ra-teal" ng-hide="editing"><i class="fa fa-pencil"></i> Edit</button>

    <div ng-show="editing">
      <button class="btn btn-ra-teal" ng-click="save()"><i class="fa fa-save"></i> Save</button>
    </div>
  </div>

  <div ng-repeat="entry in list.entries" class="entry">
    <div class="edit-controls" ng-show="editing">
      <button ng-click="remove($index)" class="btn btn-ra-red btn-xs btn-block"><i class="fa fa-times"></i></button>
      <button ng-click="moveUp($index)" class="btn btn-ra-teal btn-xs btn-block"><i class="fa fa-arrow-up"></i></button>
      <button ng-click="moveDown($index)" class="btn btn-ra-teal btn-xs btn-block"><i class="fa fa-arrow-down"></i></button>
    </div>

    <!-- Display a place -->
    <div ng-if="entry.place" class="place">
      <div class="row">
        <div class="col-sm-3">
          <a ui-sref="place.view({id: entry.place._id})">
            <img ng-src="{{entry.place.photo}}" class="thumbnail" />
          </a>
        </div>

        <div class="col-sm-9">
          <div class="name space-bottom-small">
            <a ui-sref="place.view({id: entry.place._id})">{{entry.place.locationDetails.name}}</a>
            <div rating ng-model="entry.place.rating" state-on="['fa', 'fa-star']" state-off="['fa', 'fa-star-o']"
                 readonly="true" class="color-sunflower-dark space-left-large"></div>
          </div>

          <!-- Location -->
          <div class="row space-bottom-small" ng-show="entry.place.locationDetails.formatted_address">
            <div class="col-xs-1"><i class="fa fa-lg fa-map-marker"></i></div>
            <div class="col-xs-10">{{entry.place.locationDetails.formatted_address}}</div>
          </div>

          <!-- Phone -->
          <div class="row space-bottom-small" ng-show="entry.place.locationDetails.formatted_phone_number">
            <div class="col-xs-1"><i class="fa fa-lg fa-phone"></i></div>
            <div class="col-xs-10">{{entry.place.locationDetails.formatted_phone_number}}</div>
          </div>

          <!-- Website -->
          <div class="row space-bottom-small" ng-show="entry.place.locationDetails.website">
            <div class="col-xs-1"><i class="fa fa-lg fa-globe"></i></div>
            <div class="col-xs-10"><a href="{{entry.place.locationDetails.website}}">Website</a></div>
          </div>

          <!-- Google+ -->
          <div class="row space-bottom-small" ng-show="entry.place.locationDetails.url">
            <div class="col-xs-1"><i class="fa fa-lg fa-google-plus"></i></div>
            <div class="col-xs-10"><a href="{{entry.place.locationDetails.url}}">Google+ Page</a></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Display rich text -->
    <div ng-if="entry.text" class="text">
      <div ng-hide="editing" ng-bind-html="entry.text"></div>
      <div ng-if="editing" text-angular ng-model="entry.text"></div>
    </div>

    <!-- Display an embed -->
    <div ng-if="entry.embed" >
      <div class="row">
        <div class="col-sm-8 col-sm-offset-2">

          <div class="row embed well">
            <div class="col-sm-4">
              <img ng-src="{{entry.embed.thumbnail_url}}" class="thumbnail" />
            </div>

            <div class="col-sm-8">
              <div class="name">
                {{entry.embed.title}}
              </div>
              <p>
                {{entry.embed.description}}
              </p>
            </div>
          </div>

        </div>
      </div>
    </div>

  </div>

</div>

<div ng-include="'components/footer/footer.html'"></div>
